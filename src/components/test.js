const data = [
  {
    a: "218",
    address: "82-77  Broadway",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Walgreens Drug Store",
    insurance: "Yes",
    latitude: "40.741548170000002",
    location: {
      type: "Point",
      coordinates: [-73.88054007, 40.74154817]
    },
    location_address: "82-77 Broadway",
    location_city: "Queens",
    longitude: "-73.880540069999995",
    more_information: "Call location for hours",
    objectid: "49",
    phone: "(800) 358-9950",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/",
    zip_code: "11373"
  },
  {
    a: "224",
    address: "84-20  Broadway",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Walgreens Drug Store",
    insurance: "Yes",
    latitude: "40.739637680000001",
    location: {
      type: "Point",
      coordinates: [-73.87819067, 40.73963768]
    },
    location_address: "84-20 Broadway",
    location_city: "Queens",
    longitude: "-73.878190669999995",
    more_information: "Call location for hours",
    objectid: "70",
    phone: "(800) 358-9950",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/",
    zip_code: "11373"
  },
  {
    a: "34",
    address: "8101 BROADWAY",
    borough: "Queens",
    children: "No",
    city: "ELMHURST",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Duane Reade",
    insurance: "Yes",
    latitude: "40.743356849999998",
    location: {
      type: "Point",
      coordinates: [-73.88370824, 40.74335685]
    },
    location_address: "8101 BROADWAY",
    location_city: "ELMHURST",
    longitude: "-73.883708240000004",
    more_information: "Call location for hours",
    objectid: "124",
    phone: "718-507-0572",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/topic/duane-reade/duane-reade.jsp",
    zip_code: "11373"
  },
  {
    a: "244",
    address: "80-11  Eliot Avenue",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Walgreens Drug Store",
    insurance: "Yes",
    latitude: "40.725216690000003",
    location: {
      type: "Point",
      coordinates: [-73.87883287, 40.72521669]
    },
    location_address: "80-11 Eliot Avenue",
    location_city: "Queens",
    longitude: "-73.878832869999997",
    more_information: "Call location for hours",
    objectid: "158",
    phone: "(800) 358-9950",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/",
    zip_code: "11379"
  },
  {
    a: "169",
    address: "3766 82ND ST",
    borough: "Queens",
    children: "No",
    city: "JACKSON HEIGHTS",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Duane Reade",
    insurance: "Yes",
    latitude: "40.748204110000003",
    location: {
      type: "Point",
      coordinates: [-73.88406783, 40.74820411]
    },
    location_address: "3766 82ND ST",
    location_city: "JACKSON HEIGHTS",
    longitude: "-73.884067830000006",
    more_information: "Call location for hours",
    objectid: "321",
    phone: "718-507-8056",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/topic/duane-reade/duane-reade.jsp",
    zip_code: "11372"
  },
  {
    a: "177",
    address: "7301 37TH AVE",
    borough: "Queens",
    children: "No",
    city: "JACKSON HEIGHTS",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Duane Reade",
    insurance: "Yes",
    latitude: "40.748917550000002",
    location: {
      type: "Point",
      coordinates: [-73.89238321, 40.74891755]
    },
    location_address: "7301 37TH AVE",
    location_city: "JACKSON HEIGHTS",
    longitude: "-73.892383210000006",
    more_information: "Call location for hours",
    objectid: "354",
    phone: "718-672-8038",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.walgreens.com/topic/duane-reade/duane-reade.jsp",
    zip_code: "11372"
  },
  {
    a: "606",
    address: "74-17 Grand Avenue",
    borough: "QUEENS",
    children: "No",
    city: "Elmhurst",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Stop and Shop Pharmacy",
    insurance: "Yes",
    latitude: "40.730247329999997",
    location: {
      type: "Point",
      coordinates: [-73.88729729, 40.73024733]
    },
    location_address: "74-17 Grand Avenue",
    location_city: "Elmhurst",
    longitude: "-73.887297290000006",
    more_information: "Call location for hours",
    objectid: "417",
    phone: "(718) 803-3025",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11373"
  },
  {
    a: "614",
    address: "61-35 Junction Blvd",
    borough: "QUEENS",
    children: "No",
    city: "Long Island City",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Costco Pharmacy",
    insurance: "Yes",
    latitude: "40.733428170000003",
    location: {
      type: "Point",
      coordinates: [-73.86417003, 40.73342817]
    },
    location_address: "61-35 Junction Blvd",
    location_city: "Long Island City",
    longitude: "-73.864170029999997",
    more_information: "Call location for hours",
    objectid: "455",
    phone: "(718) 760-6479",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11374"
  },
  {
    a: "633",
    address: "80-02 Eliot Avenue",
    borough: "QUEENS",
    children: "No",
    city: "Middle Village",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Artis Drugs",
    insurance: "Yes",
    latitude: "40.725051350000001",
    location: {
      type: "Point",
      coordinates: [-73.87907305, 40.72505135]
    },
    location_address: "80-02 Eliot Avenue",
    location_city: "Middle Village",
    longitude: "-73.879073050000002",
    more_information: "Call location for hours",
    objectid: "531",
    phone: "(718) 429-6611",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11379"
  },
  {
    a: "649",
    address: "81-14 Broadway",
    borough: "QUEENS",
    children: "No",
    city: "Elmhurst",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Horizon Pharmacy III (NY81 LLC)",
    insurance: "Yes",
    latitude: "40.743256600000002",
    location: {
      type: "Point",
      coordinates: [-73.88361947, 40.7432566]
    },
    location_address: "81-14 Broadway",
    location_city: "Elmhurst",
    longitude: "-73.883619469999999",
    more_information: "Call location for hours",
    objectid: "591",
    phone: "(718) 803-1188",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11373"
  },
  {
    a: "464",
    address: "82-13  37th Avenue",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Rite Aid Pharmacy",
    insurance: "Yes",
    latitude: "40.749809419999998",
    location: {
      type: "Point",
      coordinates: [-73.88396868, 40.74980942]
    },
    location_address: "82-13 37th Avenue",
    location_city: "Queens",
    longitude: "-73.883968679999995",
    more_information: "Call location for hours",
    objectid: "592",
    phone: "(718) 565-1473",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.riteaid.com/",
    zip_code: "11372"
  },
  {
    a: "737",
    address: "81-25 37th Avenue",
    borough: "QUEENS",
    children: "No",
    city: "Jackson Heights",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Nueva Vida Pharmacy",
    insurance: "Yes",
    latitude: "40.749683429999997",
    location: {
      type: "Point",
      coordinates: [-73.88494359, 40.74968343]
    },
    location_address: "81-25 37th Avenue",
    location_city: "Jackson Heights",
    longitude: "-73.884943590000006",
    more_information: "Call location for hours",
    objectid: "593",
    phone: "(718) 899-0200",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11372"
  },
  {
    a: "478",
    address: "91-08  Roosevelt Avenue",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Rite Aid Pharmacy",
    insurance: "Yes",
    latitude: "40.748593540000002",
    location: {
      type: "Point",
      coordinates: [-73.87470809, 40.74859354]
    },
    location_address: "91-08 Roosevelt Avenue",
    location_city: "Queens",
    longitude: "-73.874708089999999",
    more_information: "Call location for hours",
    objectid: "631",
    phone: "(718) 478-6078",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.riteaid.com/",
    zip_code: "11372"
  },
  {
    a: "481",
    address: "37-32  82nd Street",
    borough: "Queens",
    children: "No",
    city: "Queens",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Rite Aid Pharmacy",
    insurance: "Yes",
    latitude: "40.749157189999998",
    location: {
      type: "Point",
      coordinates: [-73.8842424, 40.74915719]
    },
    location_address: "37-32 82nd Street",
    location_city: "Queens",
    longitude: "-73.884242400000005",
    more_information: "Call location for hours",
    objectid: "638",
    phone: "(718) 478-0700",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "https://www.riteaid.com/",
    zip_code: "11372"
  },
  {
    a: "679",
    address: "87-37 Britton Avenue",
    borough: "QUEENS",
    children: "No",
    city: "Elmhurst",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Saad Pharmacy",
    insurance: "Yes",
    latitude: "40.747777720000002",
    location: {
      type: "Point",
      coordinates: [-73.87879344, 40.74777772]
    },
    location_address: "87-37 Britton Avenue",
    location_city: "Elmhurst",
    longitude: "-73.878793439999995",
    more_information: "Call location for hours",
    objectid: "688",
    phone: "(718) 476-9100",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11373"
  },
  {
    a: "762",
    address: "77-01 37th Avenue",
    borough: "QUEENS",
    children: "No",
    city: "Jackson Heights",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Franks Pharmacy",
    insurance: "Yes",
    latitude: "40.7492728",
    location: {
      type: "Point",
      coordinates: [-73.88883495, 40.7492728]
    },
    location_address: "77-01 37th Avenue",
    location_city: "Jackson Heights",
    longitude: "-73.888834950000003",
    more_information: "Call location for hours",
    objectid: "741",
    phone: "(718) 899-2600",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    zip_code: "11372"
  },
  {
    a: "843",
    address: "59-17 JUNCTION BOULEVARD ",
    borough: "QUEENS",
    children: "No",
    city: "QUEENS",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Women's Medical Center ",
    insurance: "Yes",
    latitude: "40.734598149999997",
    location: {
      type: "Point",
      coordinates: [-73.86477384, 40.73459815]
    },
    location_address: "59-17 JUNCTION BOULEVARD",
    location_city: "QUEENS",
    longitude: "-73.864773839999998",
    more_information:
      "Call location for hours and information. Insurance not required.",
    objectid: "819",
    phone: "718 334 2503",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "http://www.nychealthandhospitals.org/hhc/html/home/home.shtml",
    zip_code: "11368"
  },
  {
    a: "845",
    address: "79-01 BROADWAY ",
    borough: "QUEENS",
    children: "Yes",
    city: "QUEENS",
    dohmh_website:
      "http://www1.nyc.gov/site/doh/health/health-topics/flu-seasonal.page",
    facility_name: "Elmhurst Hospital",
    insurance: "Yes",
    latitude: "40.744409140000002",
    location: {
      type: "Point",
      coordinates: [-73.88609674, 40.74440914]
    },
    location_address: "79-01 BROADWAY",
    location_city: "QUEENS",
    longitude: "-73.886096739999999",
    more_information:
      "Call location for hours and information. Insurance not required.",
    objectid: "824",
    phone: "718 334 2503",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "http://www.nychealthandhospitals.org/hhc/html/home/home.shtml",
    zip_code: "11373"
  },
  {
    a: "875",
    address: "86-15 QUEENS BOULEVARD",
    borough: "QUEENS",
    children: "Yes",
    city: "86-15 QUEENS BOULEVARD",
    facility_name: "Advantagecare Physicans Medical Office",
    insurance: "Yes",
    latitude: "40.736448359999997",
    location: {
      type: "Point",
      coordinates: [-73.87718672, 40.73644836]
    },
    location_address: "86-15 QUEENS BOULEVARD",
    location_city: "86-15 QUEENS BOULEVARD",
    longitude: "-73.877186719999997",
    more_information:
      "Call 646-680-3000 for an appointment or for walk-in hours. Both cash and insurance are accepted.",
    objectid: "875",
    phone: "646-680-3000",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "http://acpny.com/city",
    zip_code: "11373"
  },
  {
    a: "876",
    address: "88-06 55 AVENUE",
    borough: "QUEENS",
    children: "Yes",
    city: "88-06 55 AVENUE",
    facility_name: "Advantagecare Physicans Medical Office",
    insurance: "Yes",
    latitude: "40.735845670000003",
    location: {
      type: "Point",
      coordinates: [-73.87570839, 40.73584567]
    },
    location_address: "88-06 55 AVENUE",
    location_city: "88-06 55 AVENUE",
    longitude: "-73.87570839",
    more_information:
      "Call 646-680-3000 for an appointment or for walk-in hours. Both cash and insurance are accepted.",
    objectid: "876",
    phone: "646-680-3000",
    service_category: "Vaccines",
    service_type: "Flu Vaccine (Influenza)",
    walk_in: "Yes",
    website: "http://acpny.com/city",
    zip_code: "11373"
  }
];

findCoords = arr => {
  let lats = [];
  let lngs = [];
  arr.forEach(n => {
    lngs.push(n[0]);
    lats.push(n[1]);
  });
  let maxLat = Math.max(...lats);
  let minLat = Math.min(...lats);
  let maxLng = Math.max(...lngs);
  let minLng = Math.min(...lngs);
  return { maxLat, minLat, maxLng, minLng };
};
// console.log(findCoords(dataCoords))

// // console.log(coords);

// let width = coords.maxLat - coords.minLat;
// let height = coords.maxLng - coords.minLng;

// let gridWidth = width / n;
// let gridHeight = height / n;

const getCoords = (lng, lat) => {
  let coords = findCoords(data.map(n => n.location.coordinates));
  let n = 20;

  let height = coords.maxLat - coords.minLat;
  let width = coords.maxLng - coords.minLng;

  let gridWidth = width / n;
  let gridHeight = height / n;
  let x = lng - coords.minLng;
  let y = lat - coords.minLat;

  let newX = Math.floor(x / gridWidth);
  let newY = Math.floor(y / gridHeight);
  return [newX, newY];
};

// dataCoords.forEach(n => {
//   console.log(getCoords(n[0], n[1]));
// });

let newPharms = data.reduce((acc, n) => {
  let gridSquare = getCoords(...n.location.coordinates);
  if (!acc.some(el => getCoords(...el.location.coordinates) == gridSquare)) {
    return [...acc, n];
  }
  return acc;
}, []);

console.log(newPharms.length, "out of", data.length);
// console.log(getCoords(-73.87718672, 40.73644836))
